import re
import json
import numpy as np
import matplotlib.pyplot as plt

# 1) 把你发的那堆数据原封不动粘贴到这里（保持每行一个 {...}）
raw = r"""
{"step": 48612, "episode/score": -21.0}
{"step": 48956, "episode/score": -21.0}
{"step": 52400, "episode/score": -21.0}
{"step": 52596, "episode/score": -21.0}
{"step": 54148, "episode/score": -21.0}
{"step": 55568, "episode/score": -20.0}
{"step": 55800, "episode/score": -21.0}
{"step": 57088, "episode/score": -21.0}
{"step": 59412, "episode/score": -20.0}
{"step": 59560, "episode/score": -20.0}
{"step": 60300, "episode/score": -20.0}
{"step": 61916, "episode/score": -19.0}
{"step": 67680, "episode/score": -19.0}
{"step": 72600, "episode/score": -20.0}
{"step": 72748, "episode/score": -19.0}
{"step": 77704, "episode/score": -20.0}
{"step": 99236, "episode/score": -21.0}
{"step": 106000, "episode/score": -21.0}
{"step": 108988, "episode/score": -19.0}
{"step": 112324, "episode/score": -21.0}
{"step": 113408, "episode/score": -21.0}
{"step": 113812, "episode/score": -21.0}
{"step": 116464, "episode/score": -19.0}
{"step": 116916, "episode/score": -20.0}
{"step": 119336, "episode/score": -20.0}
{"step": 122380, "episode/score": -21.0}
{"step": 123548, "episode/score": -20.0}
{"step": 124576, "episode/score": -20.0}
{"step": 127992, "episode/score": -19.0}
{"step": 134232, "episode/score": -20.0}
{"step": 135980, "episode/score": -20.0}
{"step": 141640, "episode/score": -21.0}
{"step": 147876, "episode/score": -21.0}
{"step": 154832, "episode/score": -21.0}
{"step": 157500, "episode/score": -21.0}
{"step": 160964, "episode/score": -21.0}
{"step": 162112, "episode/score": -21.0}
{"step": 162388, "episode/score": -21.0}
{"step": 165040, "episode/score": -21.0}
{"step": 165556, "episode/score": -21.0}
{"step": 170088, "episode/score": -21.0}
{"step": 171148, "episode/score": -21.0}
{"step": 172124, "episode/score": -21.0}
{"step": 173216, "episode/score": -21.0}
{"step": 176888, "episode/score": -21.0}
{"step": 183000, "episode/score": -21.0}
{"step": 184940, "episode/score": -21.0}
{"step": 190280, "episode/score": -21.0}
{"step": 196708, "episode/score": -21.0}
{"step": 203408, "episode/score": -21.0}
{"step": 206332, "episode/score": -21.0}
{"step": 210880, "episode/score": -21.0}
{"step": 211156, "episode/score": -21.0}
{"step": 213828, "episode/score": -21.0}
{"step": 213872, "episode/score": -21.0}
{"step": 214068, "episode/score": -21.0}
{"step": 219816, "episode/score": -21.0}
{"step": 219980, "episode/score": -21.0}
{"step": 220700, "episode/score": -21.0}
{"step": 225720, "episode/score": -21.0}
{"step": 225760, "episode/score": -21.0}
{"step": 239340, "episode/score": -21.0}
{"step": 240712, "episode/score": -21.0}
{"step": 241880, "episode/score": -20.0}
{"step": 247460, "episode/score": -21.0}
{"step": 253776, "episode/score": -21.0}
{"step": 259644, "episode/score": -21.0}
{"step": 261140, "episode/score": -21.0}
{"step": 264064, "episode/score": -20.0}
{"step": 266352, "episode/score": -21.0}
{"step": 267524, "episode/score": -20.0}
{"step": 268276, "episode/score": -21.0}
{"step": 271452, "episode/score": -21.0}
{"step": 276192, "episode/score": -21.0}
{"step": 278412, "episode/score": -21.0}
{"step": 279592, "episode/score": -19.0}
{"step": 279608, "episode/score": -21.0}
{"step": 289260, "episode/score": -21.0}
{"step": 290456, "episode/score": -21.0}
{"step": 291016, "episode/score": -21.0}
{"step": 300260, "episode/score": -21.0}
{"step": 303760, "episode/score": -21.0}
{"step": 309692, "episode/score": -21.0}
{"step": 314964, "episode/score": -20.0}
{"step": 316144, "episode/score": -21.0}
{"step": 317108, "episode/score": -21.0}
{"step": 317760, "episode/score": -20.0}
{"step": 327364, "episode/score": -19.0}
{"step": 328844, "episode/score": -21.0}
{"step": 328860, "episode/score": -20.0}
{"step": 329440, "episode/score": -20.0}
{"step": 329784, "episode/score": -21.0}
{"step": 331944, "episode/score": -21.0}
{"step": 339628, "episode/score": -21.0}
{"step": 344152, "episode/score": -20.0}
{"step": 344968, "episode/score": -20.0}
{"step": 351844, "episode/score": -21.0}
{"step": 353808, "episode/score": -21.0}
{"step": 363260, "episode/score": -20.0}
{"step": 367092, "episode/score": -21.0}
{"step": 368916, "episode/score": -20.0}
{"step": 370160, "episode/score": -20.0}
{"step": 373952, "episode/score": -21.0}
{"step": 379404, "episode/score": -21.0}
{"step": 379616, "episode/score": -21.0}
{"step": 381928, "episode/score": -21.0}
{"step": 382172, "episode/score": -20.0}
{"step": 382404, "episode/score": -20.0}
{"step": 385528, "episode/score": -20.0}
{"step": 393580, "episode/score": -20.0}
{"step": 397464, "episode/score": -20.0}
{"step": 398408, "episode/score": -20.0}
{"step": 400484, "episode/score": -21.0}
{"step": 405392, "episode/score": -21.0}
{"step": 413116, "episode/score": -21.0}
{"step": 421940, "episode/score": -20.0}
{"step": 424020, "episode/score": -20.0}
{"step": 424112, "episode/score": -20.0}
{"step": 430240, "episode/score": -21.0}
{"step": 431052, "episode/score": -21.0}
{"step": 433280, "episode/score": -20.0}
{"step": 439044, "episode/score": -20.0}
{"step": 444584, "episode/score": -20.0}
{"step": 446392, "episode/score": -20.0}
{"step": 447196, "episode/score": -20.0}
{"step": 451848, "episode/score": -20.0}
{"step": 453464, "episode/score": -21.0}
{"step": 453804, "episode/score": -20.0}
{"step": 454372, "episode/score": -20.0}
{"step": 459344, "episode/score": -21.0}
{"step": 465596, "episode/score": -21.0}
{"step": 478448, "episode/score": -21.0}
{"step": 483660, "episode/score": -21.0}
{"step": 491680, "episode/score": -21.0}
{"step": 493544, "episode/score": -21.0}
{"step": 493700, "episode/score": -21.0}
{"step": 494836, "episode/score": -20.0}
{"step": 499064, "episode/score": -21.0}
{"step": 499136, "episode/score": -21.0}
{"step": 499540, "episode/score": -18.0}
{"step": 505816, "episode/score": -21.0}
{"step": 508892, "episode/score": -19.0}
{"step": 509064, "episode/score": -20.0}
{"step": 510124, "episode/score": -21.0}
{"step": 515792, "episode/score": -21.0}
{"step": 518948, "episode/score": -19.0}
{"step": 527996, "episode/score": -20.0}
{"step": 540400, "episode/score": -21.0}
{"step": 541580, "episode/score": -20.0}
{"step": 548404, "episode/score": -20.0}
{"step": 551200, "episode/score": -20.0}
{"step": 552424, "episode/score": -20.0}
{"step": 554836, "episode/score": -20.0}
{"step": 555200, "episode/score": -20.0}
{"step": 558636, "episode/score": -21.0}
{"step": 559576, "episode/score": -20.0}
{"step": 560132, "episode/score": -20.0}
{"step": 563448, "episode/score": -21.0}
{"step": 572176, "episode/score": -21.0}
{"step": 579044, "episode/score": -21.0}
{"step": 590172, "episode/score": -17.0}
{"step": 596156, "episode/score": -19.0}
{"step": 601224, "episode/score": -17.0}
{"step": 615308, "episode/score": -19.0}
{"step": 615904, "episode/score": -19.0}
{"step": 621056, "episode/score": -20.0}
{"step": 624104, "episode/score": -21.0}
{"step": 628080, "episode/score": -18.0}
{"step": 630212, "episode/score": -20.0}
{"step": 632852, "episode/score": -18.0}
{"step": 633196, "episode/score": -20.0}
{"step": 638232, "episode/score": -19.0}
{"step": 639760, "episode/score": -19.0}
{"step": 641972, "episode/score": -17.0}
{"step": 644124, "episode/score": -21.0}
{"step": 649912, "episode/score": -16.0}
{"step": 661604, "episode/score": -20.0}
{"step": 676896, "episode/score": -21.0}
{"step": 683004, "episode/score": -17.0}
{"step": 686472, "episode/score": -20.0}
{"step": 695744, "episode/score": -19.0}
{"step": 725360, "episode/score": -19.0}
{"step": 726300, "episode/score": -20.0}
{"step": 728652, "episode/score": -17.0}
{"step": 736324, "episode/score": -16.0}
{"step": 738640, "episode/score": -18.0}
{"step": 745068, "episode/score": -17.0}
{"step": 754152, "episode/score": -15.0}
{"step": 756952, "episode/score": -15.0}
{"step": 759156, "episode/score": -17.0}
{"step": 760020, "episode/score": -19.0}
{"step": 763704, "episode/score": -18.0}
{"step": 786852, "episode/score": -15.0}
{"step": 809864, "episode/score": -18.0}
{"step": 822816, "episode/score": -13.0}
{"step": 845052, "episode/score": -12.0}
{"step": 853072, "episode/score": -17.0}
{"step": 856768, "episode/score": -13.0}
{"step": 857604, "episode/score": -16.0}
{"step": 857708, "episode/score": -20.0}
{"step": 858032, "episode/score": -14.0}
{"step": 873372, "episode/score": -14.0}
{"step": 878804, "episode/score": -20.0}
{"step": 889612, "episode/score": -14.0}
{"step": 893016, "episode/score": -17.0}
{"step": 898164, "episode/score": -14.0}
{"step": 899192, "episode/score": -16.0}
{"step": 902568, "episode/score": -14.0}
{"step": 925604, "episode/score": -15.0}
{"step": 928712, "episode/score": -19.0}
{"step": 953952, "episode/score": -19.0}
{"step": 988124, "episode/score": -19.0}
{"step": 989292, "episode/score": -20.0}
{"step": 1007612, "episode/score": -13.0}
{"step": 1008132, "episode/score": -16.0}
{"step": 1011412, "episode/score": -19.0}
{"step": 1019856, "episode/score": -14.0}
{"step": 1022192, "episode/score": -14.0}
{"step": 1026688, "episode/score": -12.0}
{"step": 1027032, "episode/score": -18.0}
{"step": 1043060, "episode/score": -14.0}
{"step": 1043340, "episode/score": -15.0}
{"step": 1057640, "episode/score": -16.0}
{"step": 1080608, "episode/score": -20.0}
{"step": 1083044, "episode/score": -15.0}
{"step": 1091448, "episode/score": -16.0}
{"step": 1146568, "episode/score": -9.0}
{"step": 1161276, "episode/score": -17.0}
{"step": 1169772, "episode/score": -10.0}
{"step": 1170452, "episode/score": -15.0}
{"step": 1206876, "episode/score": -9.0}
{"step": 1208068, "episode/score": -14.0}
{"step": 1215448, "episode/score": -15.0}
{"step": 1220468, "episode/score": -11.0}
{"step": 1222288, "episode/score": -12.0}
{"step": 1265380, "episode/score": -14.0}
{"step": 1268864, "episode/score": -9.0}
{"step": 1285544, "episode/score": -10.0}
{"step": 1300172, "episode/score": -8.0}
{"step": 1334000, "episode/score": -5.0}
{"step": 1370744, "episode/score": -5.0}
{"step": 1411464, "episode/score": -16.0}
{"step": 1414420, "episode/score": -12.0}
{"step": 1421792, "episode/score": -3.0}
{"step": 1427308, "episode/score": -12.0}
{"step": 1443572, "episode/score": -19.0}
{"step": 1573892, "episode/score": -3.0}
{"step": 1574748, "episode/score": -2.0}
{"step": 1580496, "episode/score": -6.0}
{"step": 1584384, "episode/score": -8.0}
{"step": 1586328, "episode/score": -5.0}
{"step": 1586472, "episode/score": -11.0}
{"step": 1603376, "episode/score": -11.0}
{"step": 1605860, "episode/score": -9.0}
{"step": 1683836, "episode/score": -1.0}
{"step": 1692620, "episode/score": -6.0}
{"step": 1746424, "episode/score": 3.0}
{"step": 1758484, "episode/score": -8.0}
{"step": 1791328, "episode/score": -1.0}
{"step": 1791540, "episode/score": -4.0}
{"step": 1809480, "episode/score": -9.0}
{"step": 1835100, "episode/score": -18.0}
{"step": 1857900, "episode/score": -3.0}
{"step": 1939184, "episode/score": -9.0}
{"step": 1969604, "episode/score": -6.0}
{"step": 1999360, "episode/score": -6.0}
{"step": 2005992, "episode/score": -4.0}
{"step": 2025176, "episode/score": -6.0}
{"step": 2035532, "episode/score": 7.0}
{"step": 2037476, "episode/score": -5.0}
{"step": 2049104, "episode/score": 4.0}
{"step": 2142420, "episode/score": 5.0}
{"step": 2154272, "episode/score": -8.0}
{"step": 2181244, "episode/score": 3.0}
{"step": 2211052, "episode/score": -5.0}
{"step": 2224440, "episode/score": 6.0}
{"step": 2255368, "episode/score": 3.0}
{"step": 2256028, "episode/score": 3.0}
{"step": 2333172, "episode/score": 1.0}
{"step": 2378344, "episode/score": 10.0}
{"step": 2384856, "episode/score": 8.0}
{"step": 2391620, "episode/score": 2.0}
{"step": 2434480, "episode/score": 1.0}
{"step": 2446912, "episode/score": 8.0}
{"step": 2459492, "episode/score": 6.0}
{"step": 2471564, "episode/score": 5.0}
{"step": 2494444, "episode/score": 5.0}
{"step": 2527248, "episode/score": 6.0}
{"step": 2531936, "episode/score": 8.0}
{"step": 2566492, "episode/score": 4.0}
{"step": 2569044, "episode/score": 1.0}
{"step": 2576188, "episode/score": 1.0}
{"step": 2596600, "episode/score": -7.0}
{"step": 2650952, "episode/score": -1.0}
{"step": 2666612, "episode/score": 6.0}
{"step": 2702440, "episode/score": 9.0}
{"step": 2727128, "episode/score": 3.0}
{"step": 2728132, "episode/score": 9.0}
{"step": 2760688, "episode/score": 9.0}
{"step": 2808832, "episode/score": 2.0}
{"step": 2818340, "episode/score": -3.0}
{"step": 2823628, "episode/score": 3.0}
{"step": 2826156, "episode/score": 6.0}
{"step": 2826512, "episode/score": 12.0}
{"step": 2847164, "episode/score": 7.0}
{"step": 2860704, "episode/score": 9.0}
{"step": 2896568, "episode/score": 9.0}
{"step": 2925084, "episode/score": 9.0}
{"step": 2966292, "episode/score": 6.0}
{"step": 2984456, "episode/score": 6.0}
{"step": 3016628, "episode/score": -4.0}
{"step": 3019944, "episode/score": -4.0}
{"step": 3023172, "episode/score": 5.0}
{"step": 3074456, "episode/score": 6.0}
{"step": 3107584, "episode/score": 11.0}
{"step": 3110652, "episode/score": 9.0}
{"step": 3119012, "episode/score": 10.0}
{"step": 3123312, "episode/score": 9.0}
{"step": 3125008, "episode/score": 8.0}
{"step": 3139404, "episode/score": 8.0}
{"step": 3144300, "episode/score": 9.0}
{"step": 3151200, "episode/score": 10.0}
{"step": 3176276, "episode/score": 14.0}
{"step": 3227164, "episode/score": 8.0}
{"step": 3244664, "episode/score": 5.0}
{"step": 3260296, "episode/score": 7.0}
{"step": 3325300, "episode/score": 8.0}
{"step": 3331800, "episode/score": 10.0}
{"step": 3361020, "episode/score": 10.0}
{"step": 3365508, "episode/score": 9.0}
{"step": 3368336, "episode/score": 15.0}
{"step": 3372772, "episode/score": 9.0}
{"step": 3405224, "episode/score": 6.0}
{"step": 3414604, "episode/score": 13.0}
{"step": 3442988, "episode/score": 9.0}
{"step": 3450688, "episode/score": 10.0}
{"step": 3457888, "episode/score": 5.0}
{"step": 3477460, "episode/score": 12.0}
{"step": 3484848, "episode/score": 3.0}
{"step": 3523612, "episode/score": 6.0}
{"step": 3539640, "episode/score": 3.0}
{"step": 3558216, "episode/score": 17.0}
{"step": 3606104, "episode/score": 15.0}
{"step": 3608400, "episode/score": 12.0}
{"step": 3639540, "episode/score": 8.0}
{"step": 3650180, "episode/score": 14.0}
{"step": 3668412, "episode/score": 6.0}
{"step": 3688492, "episode/score": 13.0}
{"step": 3699808, "episode/score": 8.0}
{"step": 3711424, "episode/score": 11.0}
{"step": 3713828, "episode/score": 9.0}
{"step": 3714124, "episode/score": 3.0}
{"step": 3738216, "episode/score": 11.0}
{"step": 3755248, "episode/score": 10.0}
{"step": 3793748, "episode/score": 16.0}
{"step": 3813968, "episode/score": 12.0}
{"step": 3823068, "episode/score": 13.0}
{"step": 3826632, "episode/score": 12.0}
{"step": 3836152, "episode/score": 16.0}
{"step": 3858776, "episode/score": 11.0}
{"step": 3878708, "episode/score": 16.0}
{"step": 3913376, "episode/score": 17.0}
{"step": 3921796, "episode/score": 9.0}
{"step": 3943164, "episode/score": 7.0}
{"step": 3951532, "episode/score": 12.0}
{"step": 3955492, "episode/score": 7.0}
{"step": 3972328, "episode/score": 13.0}
{"step": 3978508, "episode/score": 11.0}
{"step": 3980160, "episode/score": 8.0}
{"step": 4008688, "episode/score": 9.0}
{"step": 4046224, "episode/score": 13.0}
{"step": 4066616, "episode/score": 13.0}
{"step": 4068312, "episode/score": 14.0}
{"step": 4070472, "episode/score": 10.0}
{"step": 4086100, "episode/score": 11.0}
{"step": 4105372, "episode/score": 16.0}
{"step": 4133940, "episode/score": 13.0}
{"step": 4156832, "episode/score": 12.0}
{"step": 4163880, "episode/score": 15.0}
{"step": 4169468, "episode/score": 14.0}
{"step": 4179140, "episode/score": 13.0}
{"step": 4195788, "episode/score": 9.0}
{"step": 4215616, "episode/score": 14.0}
{"step": 4234860, "episode/score": 11.0}
{"step": 4235364, "episode/score": 5.0}
{"step": 4279056, "episode/score": 14.0}
{"step": 4283760, "episode/score": 12.0}
{"step": 4286936, "episode/score": 9.0}
{"step": 4305884, "episode/score": 13.0}
{"step": 4320072, "episode/score": 14.0}
{"step": 4327828, "episode/score": 12.0}
{"step": 4361400, "episode/score": 12.0}
{"step": 4380960, "episode/score": 12.0}
{"step": 4388724, "episode/score": 15.0}
{"step": 4396284, "episode/score": 13.0}
{"step": 4402472, "episode/score": 8.0}
{"step": 4432076, "episode/score": 14.0}
{"step": 4433728, "episode/score": 14.0}
{"step": 4444324, "episode/score": 17.0}
{"step": 4444908, "episode/score": 11.0}
{"step": 4479172, "episode/score": 8.0}
{"step": 4495324, "episode/score": 13.0}
{"step": 4523696, "episode/score": 12.0}
{"step": 4535432, "episode/score": 15.0}
{"step": 4555088, "episode/score": 13.0}
{"step": 4564052, "episode/score": 12.0}
{"step": 4571832, "episode/score": 16.0}
{"step": 4573464, "episode/score": 16.0}
{"step": 4605480, "episode/score": 13.0}
{"step": 4610036, "episode/score": 11.0}
{"step": 4634300, "episode/score": 14.0}
{"step": 4639264, "episode/score": 13.0}
{"step": 4649900, "episode/score": 15.0}
{"step": 4655332, "episode/score": 11.0}
{"step": 4655808, "episode/score": 14.0}
{"step": 4677644, "episode/score": 11.0}
{"step": 4693764, "episode/score": 11.0}
{"step": 4734940, "episode/score": 14.0}
{"step": 4755016, "episode/score": 11.0}
{"step": 4764336, "episode/score": 14.0}
{"step": 4787960, "episode/score": 12.0}
{"step": 4796432, "episode/score": 12.0}
{"step": 4806568, "episode/score": 15.0}
{"step": 4812244, "episode/score": 16.0}
{"step": 4823520, "episode/score": 16.0}
{"step": 4823832, "episode/score": 9.0}
{"step": 4837172, "episode/score": 15.0}
{"step": 4839716, "episode/score": 16.0}
{"step": 4858108, "episode/score": 15.0}
{"step": 4862080, "episode/score": 13.0}
{"step": 4874092, "episode/score": 9.0}
{"step": 4928260, "episode/score": 12.0}
{"step": 4936456, "episode/score": 16.0}
{"step": 4945612, "episode/score": 11.0}
{"step": 4951644, "episode/score": 13.0}
{"step": 4976568, "episode/score": 14.0}
{"step": 4996720, "episode/score": 15.0}
{"step": 5015912, "episode/score": 17.0}
{"step": 5044020, "episode/score": 11.0}
{"step": 5045072, "episode/score": 11.0}
{"step": 5056852, "episode/score": 11.0}
{"step": 5060288, "episode/score": 16.0}
{"step": 5073980, "episode/score": 15.0}
{"step": 5078116, "episode/score": 9.0}
{"step": 5082400, "episode/score": 13.0}
{"step": 5083800, "episode/score": 10.0}
{"step": 5090860, "episode/score": 10.0}
{"step": 5151364, "episode/score": 13.0}
{"step": 5152540, "episode/score": 14.0}
{"step": 5159096, "episode/score": 16.0}
{"step": 5163596, "episode/score": 16.0}
{"step": 5181552, "episode/score": 16.0}
{"step": 5188360, "episode/score": 11.0}
{"step": 5241704, "episode/score": 17.0}
{"step": 5257040, "episode/score": 13.0}
{"step": 5265844, "episode/score": 12.0}
{"step": 5268924, "episode/score": 16.0}
{"step": 5289124, "episode/score": 12.0}
{"step": 5299552, "episode/score": 9.0}
{"step": 5305748, "episode/score": 10.0}
{"step": 5314328, "episode/score": 13.0}
{"step": 5324396, "episode/score": 14.0}
{"step": 5332996, "episode/score": 16.0}
{"step": 5353792, "episode/score": 11.0}
{"step": 5366264, "episode/score": 14.0}
{"step": 5371464, "episode/score": 17.0}
{"step": 5387548, "episode/score": 13.0}
{"step": 5415820, "episode/score": 12.0}
{"step": 5440496, "episode/score": 11.0}
{"step": 5443636, "episode/score": 12.0}
{"step": 5484132, "episode/score": 15.0}
{"step": 5489896, "episode/score": 12.0}
{"step": 5493776, "episode/score": 8.0}
{"step": 5519612, "episode/score": 11.0}
{"step": 5534488, "episode/score": 13.0}
{"step": 5552596, "episode/score": 10.0}
{"step": 5559916, "episode/score": 12.0}
{"step": 5561664, "episode/score": 13.0}
{"step": 5566148, "episode/score": 9.0}
{"step": 5581576, "episode/score": 17.0}
{"step": 5585952, "episode/score": 9.0}
{"step": 5597916, "episode/score": 9.0}
{"step": 5613620, "episode/score": 15.0}
{"step": 5628300, "episode/score": 15.0}
{"step": 5633592, "episode/score": 10.0}
{"step": 5653104, "episode/score": 14.0}
{"step": 5698364, "episode/score": 16.0}
{"step": 5700964, "episode/score": 9.0}
{"step": 5719080, "episode/score": 13.0}
{"step": 5727832, "episode/score": 16.0}
{"step": 5738192, "episode/score": 9.0}
{"step": 5750548, "episode/score": 13.0}
{"step": 5756488, "episode/score": 17.0}
{"step": 5757740, "episode/score": 13.0}
{"step": 5777412, "episode/score": 11.0}
{"step": 5789340, "episode/score": 11.0}
{"step": 5803744, "episode/score": 15.0}
{"step": 5816652, "episode/score": 13.0}
{"step": 5823028, "episode/score": 11.0}
{"step": 5823744, "episode/score": 12.0}
{"step": 5838136, "episode/score": 14.0}
{"step": 5845232, "episode/score": 10.0}
{"step": 5909284, "episode/score": 14.0}
{"step": 5913552, "episode/score": 17.0}
{"step": 5917208, "episode/score": 16.0}
{"step": 5963196, "episode/score": 12.0}
{"step": 5969620, "episode/score": 17.0}
{"step": 5973228, "episode/score": 17.0}
{"step": 5987368, "episode/score": 14.0}
{"step": 5999520, "episode/score": 14.0}
{"step": 6005384, "episode/score": 12.0}
{"step": 6014236, "episode/score": 16.0}
{"step": 6033472, "episode/score": 14.0}
{"step": 6039492, "episode/score": 13.0}
{"step": 6053872, "episode/score": 15.0}
{"step": 6055756, "episode/score": 17.0}
{"step": 6057524, "episode/score": 15.0}
{"step": 6068344, "episode/score": 7.0}
{"step": 6090276, "episode/score": 15.0}
{"step": 6112216, "episode/score": 16.0}
{"step": 6132240, "episode/score": 13.0}
{"step": 6153836, "episode/score": 12.0}
{"step": 6161596, "episode/score": 18.0}
{"step": 6172372, "episode/score": 15.0}
{"step": 6206088, "episode/score": 12.0}
{"step": 6212828, "episode/score": 17.0}
{"step": 6221096, "episode/score": 7.0}
{"step": 6234564, "episode/score": 14.0}
{"step": 6266616, "episode/score": 12.0}
{"step": 6269568, "episode/score": 15.0}
{"step": 6270688, "episode/score": 8.0}
{"step": 6276020, "episode/score": 13.0}
{"step": 6310104, "episode/score": 15.0}
{"step": 6315556, "episode/score": 15.0}
{"step": 6317296, "episode/score": 11.0}
{"step": 6321100, "episode/score": 10.0}
{"step": 6334544, "episode/score": 15.0}
{"step": 6397512, "episode/score": 14.0}
{"step": 6406356, "episode/score": 16.0}
{"step": 6406504, "episode/score": 14.0}
{"step": 6416492, "episode/score": 13.0}
{"step": 6431644, "episode/score": 12.0}
{"step": 6435836, "episode/score": 8.0}
{"step": 6466052, "episode/score": 15.0}
{"step": 6480000, "episode/score": 10.0}
{"step": 6484192, "episode/score": 10.0}
{"step": 6487288, "episode/score": 15.0}
{"step": 6499444, "episode/score": 15.0}
{"step": 6501680, "episode/score": 12.0}
{"step": 6523148, "episode/score": 16.0}
{"step": 6543320, "episode/score": 8.0}
{"step": 6556880, "episode/score": 9.0}
{"step": 6565220, "episode/score": 17.0}
{"step": 6571528, "episode/score": 16.0}
{"step": 6593108, "episode/score": 14.0}
{"step": 6596072, "episode/score": 14.0}
{"step": 6613164, "episode/score": 16.0}
{"step": 6620412, "episode/score": 14.0}
{"step": 6653148, "episode/score": 15.0}
{"step": 6668804, "episode/score": 14.0}
{"step": 6671040, "episode/score": 13.0}
{"step": 6683640, "episode/score": 16.0}
{"step": 6692256, "episode/score": 11.0}
{"step": 6704140, "episode/score": 16.0}
{"step": 6712052, "episode/score": 14.0}
{"step": 6737968, "episode/score": 14.0}
{"step": 6745808, "episode/score": 16.0}
{"step": 6760984, "episode/score": 14.0}
{"step": 6782728, "episode/score": 13.0}
{"step": 6801644, "episode/score": 14.0}
{"step": 6802148, "episode/score": 6.0}
{"step": 6802940, "episode/score": 14.0}
{"step": 6806376, "episode/score": 17.0}
{"step": 6806612, "episode/score": 12.0}
{"step": 6862144, "episode/score": 10.0}
{"step": 6877280, "episode/score": 13.0}
{"step": 6878836, "episode/score": 15.0}
{"step": 6884024, "episode/score": 11.0}
{"step": 6886300, "episode/score": 5.0}
{"step": 6894404, "episode/score": 6.0}
{"step": 6932172, "episode/score": 14.0}
{"step": 6949656, "episode/score": 16.0}
{"step": 6950896, "episode/score": 17.0}
{"step": 6974416, "episode/score": 11.0}
{"step": 7000828, "episode/score": 15.0}
{"step": 7001064, "episode/score": 14.0}
{"step": 7012296, "episode/score": 15.0}
{"step": 7017636, "episode/score": 13.0}
{"step": 7033772, "episode/score": 14.0}
{"step": 7035988, "episode/score": 11.0}
{"step": 7049312, "episode/score": 14.0}
{"step": 7052980, "episode/score": 17.0}
{"step": 7061020, "episode/score": 11.0}

"""

# 2) 解析 jsonl
rows = []
for line in raw.strip().splitlines():
    line = line.strip()
    if not line:
        continue
    rows.append(json.loads(line))

steps = np.array([r["step"] for r in rows], dtype=np.int64)
scores = np.array([r["episode/score"] for r in rows], dtype=np.float64)

# 3) 按 step 排序（保险起见）
order = np.argsort(steps)
steps, scores = steps[order], scores[order]

# 4) 趋势线方案A：按 step 分箱求均值（推荐）
# bins=100 表示把整个训练步数范围分成 100 段，你也可以改成 50/200 等
bins = 120
edges = np.linspace(steps.min(), steps.max(), bins + 1)

bin_centers = []
bin_means = []
for i in range(bins):
    m = (steps >= edges[i]) & (steps < edges[i + 1])
    if m.any():
        bin_centers.append((edges[i] + edges[i + 1]) / 2)
        bin_means.append(scores[m].mean())

bin_centers = np.array(bin_centers)
bin_means = np.array(bin_means)

# 5) 趋势线方案B：对分箱均值再做移动平均（更平滑，可选）
# window=7 表示用 7 个箱子的均值做一次平滑
window = 7
if len(bin_means) >= window:
    kernel = np.ones(window) / window
    smooth = np.convolve(bin_means, kernel, mode="valid")
    smooth_x = bin_centers[window - 1 :]
else:
    smooth_x, smooth = bin_centers, bin_means

# 6) 画图
plt.figure(figsize=(10, 5))
plt.scatter(steps, scores, s=10, alpha=0.25, label="raw episode/score")
plt.plot(bin_centers, bin_means, linewidth=2, label=f"binned mean (bins={bins})")
plt.plot(smooth_x, smooth, linewidth=3, label=f"binned mean + moving avg (window={window})")

plt.xlabel("step")
plt.ylabel("episode/score")
plt.title("Episode Score Trend")
plt.grid(True, alpha=0.3)
plt.legend()
plt.tight_layout()

# ✅ 保存成 PNG（建议放在 show 之前）
out_path = "episode_score_trend.png"
plt.savefig(out_path, dpi=200, bbox_inches="tight")
print(f"saved to: {out_path}")

plt.show()
